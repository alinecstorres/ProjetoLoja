<!DOCTYPE HTML>
<html xmlns:layout="http://www.w3.org/1999/xhtml"
	layout:decorate="~{administrativo/fragments/layout}">
<head>
<title>ACST Administrativo - Permissões</title>
</head>
<body>
	<section class="layout-content" layout:fragment="corpo">

		<div class="row">
			<div class="col-12" style="text-align: end;">
				<h3>Permissões</h3>
			</div>
		</div>
		<br/>

		<form action="/administrativo/permissoes/salvar" th:object="${permissao}" method="POST">
			
			<div class="row" >

				<div class="col-6">
					<label>Funcionário</label> 
					<select class="form-select" th:field="*{funcionario}" name="funcionario" autofocus="autofocus">
						<option value="" disabled>Selecione</option>
						<option th:each="fun: ${listaFuncionarios}" th:value="${fun.id}" th:text="${fun.nome}"></option>
					</select>
				</div>

				<div class="col-5">
					<label>Papel</label> 
					<select class="form-select" th:field="*{role}" name="role" autofocus="autofocus">
						<option value="" disabled>Selecione</option>
						<option th:each="role: ${listaRoles}" th:value="${role.id}" th:text="${role.nome}"></option>
					</select>
				</div>

				<div class="col-1"><br/><button type="submit" name="acao" th:value="salvar" class="btn btn-outline-primary"><i class="bi bi-check-lg"></i></button></div>

			</div>
			
			<br/>
			
			<input type="hidden" id="id" th:field="*{id}" value="" />
		</form>
		<form action="/administrativo/permissoes/salvar" th:object="${listaPermissoes}" method="POST">
			<table class="table table-striped table-hover table-sm" >
				<thead>
				<tr>
					<th>Funcionario</th>
					<th>Papel</th>
					<th>Data</th>
					<th>Ação</th>
				</tr>
				</thead>
				<tbody>
					<tr th:each="perm : ${listaPermissoes}">
						<td th:text="${perm.funcionario.nome}"></td>
						<td th:text="${perm.role.nome}"></td>
						<td th:text="${#dates.format(perm.dataCadastro, 'dd-MM-yyyy')}"></td>
						<td>
							<button type="submit" name="acao" th:value="${perm.id}" class="btn btn-outline-danger"><span class="bi bi-trash3" title="Excluir"></span></button>
						</td>
				</tbody>
			</table>
		</form>
		
	</section>
</body>
</html>	